# JSONBin CLI Tool

CLI приложение для работы с JSONBin API - создание bins из локальных JSON файлов.

## Установка и настройка

### 1. Получите API ключ
Зарегистрируйтесь на [JSONBin.io](https://jsonbin.io/) и получите ваш API ключ.

### 2. Создайте .env файл
Создайте файл `.env` в корне проекта:
```
KEY=ваш_api_ключ_от_jsonbin
```

### 3. Соберите приложение
```bash
go build -o cli main.go
```

## Использование

### Команды

#### Создание bin из JSON файла
```bash
./cli --create --file=bins_data.json --name=my-bin
```

#### Просмотр списка созданных bins
```bash
./cli --list
```

#### Получение данных bin по ID
```bash
./cli --get --id=68a83742ae596e708fd0f72c
```

### Параметры командной строки
- `--create` - флаг для создания нового bin
- `--list` - флаг для просмотра списка всех созданных bins  
- `--get` - флаг для получения данных bin по ID
- `--file=<путь>` - путь к JSON файлу для загрузки (обязательный для --create)
- `--name=<имя>` - имя для bin (обязательный для --create)
- `--id=<bin_id>` - ID bin для получения данных (обязательный для --get)

### Примеры использования
```bash
# Создание нового bin
./cli --create --file=bins_data.json --name=my-first-bin

# Просмотр всех созданных bins
./cli --list

# Получение данных конкретного bin
./cli --get --id=68a83742ae596e708fd0f72c
```

## Что делает приложение

### Команда --create
1. **Читает JSON файл** с помощью пакета `file`
2. **Валидирует JSON** перед отправкой
3. **Отправляет POST запрос** на `https://api.jsonbin.io/v3/b` с помощью пакета `api`
4. **Использует API ключ** из `.env` файла через пакет `config`
5. **Извлекает ID** из ответа сервера
6. **Сохраняет локально** ID и имя bin в общий файл `bins.json`

### Команда --list
1. **Читает файл** `bins.json` с помощью пакета `file`
2. **Отображает таблицу** всех созданных bins с их ID и именами

### Команда --get
1. **Отправляет GET запрос** на `https://api.jsonbin.io/v3/b/<ID>` с помощью пакета `api`
2. **Использует API ключ** из `.env` файла через пакет `config`
3. **Отображает метаданные** bin (ID, дата создания, приватность)
4. **Выводит содержимое** bin в формате JSON

## Структура ответа от JSONBin API

```json
{
  "record": {
    // ваши данные
  },
  "metadata": {
    "id": "68a815ba43b1c97be925277a",
    "createdAt": "2025-08-22T07:01:14.881Z",
    "private": true
  }
}
```

## Локальное хранилище bins

Все созданные bins сохраняются в общий файл `bins.json`:
```json
{
  "bins": [
    {
      "id": "68a83742ae596e708fd0f72c",
      "name": "my-first-bin"
    },
    {
      "id": "68a8375bd0ea881f40602848", 
      "name": "my-second-bin"
    }
  ]
}
```

## Обработка ошибок

Приложение корректно обрабатывает следующие ошибки:
- Отсутствие обязательных флагов (--file, --name, --id)
- Неверные комбинации команд
- Отсутствие или неправильный API ключ  
- Отсутствие файла для загрузки
- Невалидный JSON в файле
- Несуществующий bin ID (при --get)
- Ошибки API запросов (401, 400, 404, и др.)
- Ошибки чтения/записи локальных файлов
- Дублирование bin ID в локальном хранилище

## Архитектура

Проект использует модульную архитектуру с разделением ответственности:

- `api/` - работа с JSONBin API
- `config/` - загрузка конфигурации из .env
- `file/` - чтение и запись файлов  
- `bins/` - доменные модели и бизнес-логика
- `storage/` - абстракция хранилища данных

Каждый модуль имеет четко определенные интерфейсы и может быть легко заменен или расширен.
